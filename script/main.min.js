function getTagsDataById(e,t){var o,n;return $.each(globalData,function(t,i){$.each(i.tags,function(t,i){i.id===e&&(o=i.section,n=i.position)})}),"section"===t?o:"position"===t?n:void 0}function encodeHtml(e){var t=e;return t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;")}function decodeHtml(e){var t=e;return t=t.replace(/&lt;/g,"<"),t=t.replace(/&gt;/g,">")}function insertDataIdInHtml(e,t){if(e.indexOf("script")>-1){for(var o=e.split(">"),n=0;n<o.length;n++){for(var i=o[n].split(" "),a=0;a<i.length;a++)i[a].indexOf("type")>-1&&(i[a]="data-"+i[a]);0===n&&i.push('type="application/json"'),o[n]=i.join(" ")}e=o.join(">")}var d;return $("#temp").html(e),$("#temp").children().each(function(){$(this).attr("data-id",t),d=$(this)[0].outerHTML}),$("#temp").empty(),d}function removeDataIdInHtml(e){var t;return $("#temp").html(e),$("#temp").find("script").each(function(){$(this).attr("type",$(this).attr("data-type")),$(this).removeAttr("data-type")}),$("#temp").find("*[data-id]").each(function(){$(this).removeAttr("data-id"),t=$(this)[0].outerHTML}),$("#temp").empty(),t}function findPreviousTagsElement(e,t){var o=getTagsDataById(e,"position"),n=new Array;$("#code-dom").contents().find(t).children().each(function(){var e=$(this).data("id"),t=getTagsDataById(e,"position"),o={id:e,position:t};n.push(o)});for(var i=new Array,a=0;a<n.length;a++)n[a].position<o&&i.push(n[a]);for(var c,d=0,a=0;a<i.length;a++)n[a].position>d&&(d=n[a].position,c=n[a]);return"undefined"!=typeof c?c.id:!1}function initCode(e){$("#code").html(e),$("#code").removeClass("prettyprinted"),prettyPrint()}function reInitCode(){var e=$("#code-dom").contents().find("html"),t="";e.children().each(function(){var e=$(this).context.localName;t+="<br>	"+encodeHtml("<"+e+">"),$(this).children().each(function(){var o=($(this).data("id"),removeDataIdInHtml($(this)[0].outerHTML));t+="<br>		"+encodeHtml(o)}),t+="<br>	"+encodeHtml("</"+e+">"),"head"===e&&(t+="<br>")});var o=encodeHtml("<!DOCTYPE html>")+"<br>"+encodeHtml("<html>")+t+"<br>"+encodeHtml("</html>");initCode(o)}jQuery.fn.selectText=function(){var o,n,e=document,t=this[0];e.body.createTextRange?(o=document.body.createTextRange(),o.moveToElementText(t),o.select()):window.getSelection&&(n=window.getSelection(),o=document.createRange(),o.selectNodeContents(t),n.removeAllRanges(),n.addRange(o))};var globalData;$.ajax({url:"./data/tags.json",dataType:"json",success:function(e){if(globalData=e,$.each(e,function(e,t){var o=t.id;$("#tag-menu").append("<li id='"+o+"' class='collection-item'><span class='title "+t.color+"-text'>"+t.title+"</span><form class='tag-form'></form></li>"),$.each(t.tags,function(e,t){var n=encodeHtml(insertDataIdInHtml(t.html,t.id));$("#"+o+" .tag-form").append("<p><input class='tag-checkbox' id='"+t.id+"' type='checkbox' data-html='"+n+"'><label for='"+t.id+"'>"+t.title+"</label></p>")})}),$(".tag-checkbox").change(function(){var e=$(this).data("html"),t=$(this).attr("id");if($(this).is(":checked")){var o=getTagsDataById(t,"section"),n=findPreviousTagsElement(t,o);n!==!1?$("#code-dom").contents().find(o).find("*[data-id='"+n+"']").after(e):$("#code-dom").contents().find(o).prepend(e),reInitCode()}else $("#code-dom").contents().find("*[data-id='"+t+"']").remove(),reInitCode()}),$.cookie("html_bones"))for(var t=$.cookie("html_bones_ids").split(","),o=0;o<t.length;o++)$("#"+t[o]).prop("checked",!0)}}),$(document).ready(function(){if($.cookie("html_bones")){var e=$.cookie("html_bones_head"),t=$.cookie("html_bones_body");$("#code-dom").contents().find("head").html(e),$("#code-dom").contents().find("body").html(t),reInitCode()}else initCode(encodeHtml($("#code-dom").html()));$(".toggle-sidebar").sideNav(),$("#code").dblclick(function(){$(this).selectText()}),$("#btn-reset-code").click(function(){$.removeCookie("html_bones"),$.removeCookie("html_bones_head"),$.removeCookie("html_bones_body"),$.removeCookie("html_bones_ids"),$("#code-dom").contents().find("head").empty(),$("#code-dom").contents().find("body").empty(),$(".tag-checkbox").prop("checked",!1),reInitCode()}),$("#btn-select-code").click(function(){$("#code").selectText()}),$("#btn-save-as-cookie").click(function(){var e=$("#code-dom").contents().find("head").html(),t=$("#code-dom").contents().find("body").html(),o=new Array;if($("#code-dom").contents().find("head, body").children().each(function(){o.push($(this).data("id"))}),$.cookie("html_bones","set",{expires:365}),$.cookie("html_bones_head",e,{expires:365}),$.cookie("html_bones_body",t,{expires:365}),$.cookie("html_bones_ids",o,{expires:365}),$.cookie("html_bones")){var n=$(this);n.addClass("green"),n.find("i").removeClass("mdi-content-save"),n.find("i").addClass("mdi-action-done"),setTimeout(function(){n.removeClass("green"),n.find("i").removeClass("mdi-action-done"),n.find("i").addClass("mdi-content-save")},3e3)}}),$(".version").text($("html").data("version"))});