function getTagsDataById(e,t){var o,n;return $.each(globalData,function(t,i){$.each(i.tags,function(t,i){i.id===e&&(o=i.section,n=i.position)})}),"section"===t?o:"position"===t?n:void 0}function encodeHtml(e){var t=e;return t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;")}function decodeHtml(e){var t=e;return t=t.replace(/&lt;/g,"<"),t=t.replace(/&gt;/g,">")}function insertDataIdInHtml(e,t){var o=e.split(" ");if(1===o.length){var n=e.split(">");return n[0]+=' data-id="'+t+'"',n.join(">")}o.splice(1,0,'data-id="'+t+'"'),"<script"===o[0]&&o.splice(1,0,'type="application/json"');var i=o.join(" ");return i}function removeDataIdInHtml(e){var t=e.split(" ");if(2===t.length){var o=t[1].split(">");return o.splice(0,1),t[1]=o.join(">"),t.join(">")}t.splice(1,1),"<script"===t[0]&&t.splice(1,1);var n=t.join(" ");return n}function findPreviousTagsElement(e,t){var o=getTagsDataById(e,"position"),n=new Array;$("#code-dom").contents().find(t).children().each(function(){var e=$(this).data("id"),t=getTagsDataById(e,"position"),o={id:e,position:t};n.push(o)});for(var i=new Array,d=0;d<n.length;d++)n[d].position<o&&i.push(n[d]);for(var a,c=0,d=0;d<i.length;d++)n[d].position>c&&(c=n[d].position,a=n[d]);return"undefined"!=typeof a?a.id:!1}function initCode(e){$("#code").html(e),$("#code").removeClass("prettyprinted"),prettyPrint()}function reInitCode(){var e=$("#code-dom").contents().find("html"),t="";e.children().each(function(){var e=$(this).context.localName;t+="<br>	"+encodeHtml("<"+e+">"),$(this).children().each(function(){var e=($(this).data("id"),removeDataIdInHtml($(this)[0].outerHTML));t+="<br>		"+encodeHtml(e)}),t+="<br>	"+encodeHtml("</"+e+">"),"head"===e&&(t+="<br>")});var o=encodeHtml("<!DOCTYPE html>")+"<br>"+encodeHtml("<html>")+t+"<br>"+encodeHtml("</html>");initCode(o)}jQuery.fn.selectText=function(){var e,t,o=document,n=this[0];o.body.createTextRange?(e=document.body.createTextRange(),e.moveToElementText(n),e.select()):window.getSelection&&(t=window.getSelection(),e=document.createRange(),e.selectNodeContents(n),t.removeAllRanges(),t.addRange(e))};var globalData;$.ajax({url:"./data/tags.json",dataType:"json",success:function(e){if(globalData=e,$.each(e,function(e,t){var o=t.id;$("#tag-menu").append("<li id='"+o+"' class='collection-item'><span class='title "+t.color+"-text'>"+t.title+"</span><form class='tag-form'></form></li>"),$.each(t.tags,function(e,t){var n=encodeHtml(insertDataIdInHtml(t.html,t.id));$("#"+o+" .tag-form").append("<p><input class='tag-checkbox' id='"+t.id+"' type='checkbox' data-html='"+n+"'><label for='"+t.id+"'>"+t.title+"</label></p>")})}),$(".tag-checkbox").change(function(){var e=$(this).data("html"),t=$(this).attr("id");if($(this).is(":checked")){var o=getTagsDataById(t,"section"),n=findPreviousTagsElement(t,o);n!==!1?$("#code-dom").contents().find(o).find("*[data-id='"+n+"']").after(e):$("#code-dom").contents().find(o).prepend(e),reInitCode()}else $("#code-dom").contents().find("*[data-id='"+t+"'").remove(),reInitCode()}),$.cookie("html_bones"))for(var t=$.cookie("html_bones_ids").split(","),o=0;o<t.length;o++)$("#"+t[o]).prop("checked",!0)}}),$(document).ready(function(){if($.cookie("html_bones")){var e=$.cookie("html_bones_head"),t=$.cookie("html_bones_body");$("#code-dom").contents().find("head").html(e),$("#code-dom").contents().find("body").html(t),reInitCode()}else initCode(encodeHtml($("#code-dom").html()));$(".toggle-sidebar").sideNav(),$("#code").dblclick(function(){$(this).selectText()}),$("#btn-reset-code").click(function(){$.removeCookie("html_bones"),$.removeCookie("html_bones_head"),$.removeCookie("html_bones_body"),$.removeCookie("html_bones_ids"),$("#code-dom").contents().find("head").empty(),$("#code-dom").contents().find("body").empty(),$(".tag-checkbox").prop("checked",!1),reInitCode()}),$("#btn-select-code").click(function(){$("#code").selectText()}),$("#btn-save-as-cookie").click(function(){var e=$("#code-dom").contents().find("head").html(),t=$("#code-dom").contents().find("body").html(),o=new Array;if($("#code-dom").contents().find("head, body").children().each(function(){o.push($(this).data("id"))}),$.cookie("html_bones","set",{expires:365}),$.cookie("html_bones_head",e,{expires:365}),$.cookie("html_bones_body",t,{expires:365}),$.cookie("html_bones_ids",o,{expires:365}),$.cookie("html_bones")){var n=$(this);n.addClass("green"),n.find("i").removeClass("mdi-content-save"),n.find("i").addClass("mdi-action-done"),setTimeout(function(){n.removeClass("green"),n.find("i").removeClass("mdi-action-done"),n.find("i").addClass("mdi-content-save")},3e3)}}),$(".version").text($("html").data("version"))});